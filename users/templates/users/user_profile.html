{% extends 'base.html' %}

{% block links %}
    <link rel="stylesheet" href="/static/users/css/user_profile.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
{% endblock %}

{% block container %}
    <div class="container" id="user_profile">
        <div class="row mt-3">
            <div class="col-xs-12">
                <h2>Personal Info</h2>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-9">
                <div class="card infoCard">
                    <div class="card-header">
                        Profile
                    </div>
                    <div class="card-body">
                        <button type="button" class="btn btn-secondary btn-lg btn-block cardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">PHOTO</h6>   
                                </div>
                                <div class="col-6" >
                                    <p> You can change photo </p>
                                </div>
                                <div class="col">
                                    <img src="/static/images/{{user.picture}}" alt="profile-picture" data-toggle="modal" data-target="#editImg">
                                </div>
                            </div>
                        </button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block cardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">NAME</h6>  
                                </div>
                                <div class="col-6" >
                                    <p> {{ user.first_name }} {{ user.last_name }}</p>
                                </div>
                                <div class="col">
                                    <a href="#" data-toggle="modal" data-target="#editName">EDIT</a>
                                </div>
                            </div>
                        </button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block cardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">BIRTH-DATE</h6>   
                                </div>
                                <div class="col-6" >
                                {% if user.birth_date == None%}
                                    <p> You can add birth date </p>
                                    </div>
                                    <div class="col">
                                        <a href="#" data-toggle="modal" data-target="#editBirthdate">ADD</a>
                                    </div>
                                {% else %}
                                    <p> {{ user.birth_date }} </p>
                                    </div>
                                    <div class="col">
                                        <a href="#" data-toggle="modal" data-target="#editBirthdate">EDIT</a>
                                    </div>  
                                {% endif %}        
                            </div>
                        </button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block cardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">COUNTRY</h6>   
                                </div>
                                <div class="col-6" >
                                    {% if user.country == None or user.country == "" %}
                                        <p> You can add country </p>
                                        </div>
                                        <div class="col">
                                            <a href="#" data-toggle="modal" data-target="#editCountry">ADD</a>  
                                        </div>
                                    {% else %}
                                        <p> {{ user.country }} </p>
                                        </div>
                                        <div class="col">
                                            <a href="#" data-toggle="modal" data-target="#editCountry">EDIT</a> 
                                        </div>
                                    {% endif %}
                            </div>
                        </button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block lastCardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">PASSWORD</h6>   
                                </div>
                                <div class="col-6" >
                                    <p> You can edit password </p>
                                </div>
                                <div class="col">
                                    <a href="#" data-toggle="modal" data-target="#editPassword">EDIT</a>  
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            
        </div>
        <br> <br>
        
        <div class="row">
            <div class="col-9">
                <div class="card infoCard">
                    <div class="card-header">
                        Contact info
                    </div>
                    <div class="card-body">
                        <button type="button" class="btn btn-secondary btn-lg btn-block cardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">EMAIL</h6>   
                                </div>
                                <div class="col-6" >
                                    <p>{{ user.email }} </p>
                                </div>
                                <div class="col">
                                </div>
                            </div>
                        </button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block cardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title">PHONE</h6>   
                                </div>
                                <div class="col-6" >
                                    <p> {{ user.phone }} </p>
                                </div>
                                <div class="col">
                                    <a href="#" data-toggle="modal" data-target="#editPhone">EDIT</a>   
                                </div>
                            </div>
                        </button>
                        <button type="button" class="btn btn-secondary btn-lg btn-block lastCardElement">
                            <div class="row">  
                                <div class="col">
                                    <h6 class="align-middle title"> FACEBOOK-PROFILE</h6>   
                                </div>
                                {% if user.fb_page == None %}
                                    <div class="col-6" >
                                        <p> You can add facebook profile </p>
                                    </div>
                                    <div class="col">
                                        <a href="#" data-toggle="modal" data-target="#editFb_page">ADD</a>   
                                    </div>
                                {% else %}
                                    <div class="col-6" >
                                        <p> {{ user.fb_page }} </p>
                                    </div>
                                    <div class="col">
                                        <a href="#" data-toggle="modal" data-target="#editFb_page">EDIT</a>   
                                    </div>
                                {% endif %}
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="deleteDiv">
            <div class="col-4">
                <div class="card operationCard">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item deleteBtn" data-toggle="modal" data-target="#deleteAccount">delete account</li>
                    </ul>
                </div>
            </div>
        </div>
        
    </div>
    <br> <br>
    
    
    {% endblock %}
    
    {% block modal %}

    <!--  #########  edit picture ########## -->
        <div class="modal fade" id="editImg" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Change Photo</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_photo_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        {{ form.as_p }} 
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
            </div>
            </div>
        </div>
            

    <!--  #########  edit name ########## -->
        <div class="modal fade" id="editName" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Change Name</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_name_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <label>First Name</label>
                        <input type="text" name="first_name" class="form-control edited_value" value="{{ user.first_name }}" required/></br />
                        <label>Last Name</label>
                        <input type="text" name="last_name" class="form-control edited_value" value="{{ user.last_name }}" required/><br />
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
            </div>
            </div>
        </div>

    <!--  #########  edit birthdate ########## -->
        <div class="modal fade" id="editBirthdate" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Change Birthdate</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_birthdate_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <label>Birthdate</label>
                        <input type="date" name="birth_date" class="form-control edited_value" value="{{ user.birth_date }}" required/></br />
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
            </div>
            </div>
        </div>


    <!--  #########  edit country ########## -->
        <div class="modal fade" id="editCountry" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Change Country</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_country_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <label>Country</label>
                        <input type="text" name="country" class="form-control edited_value" value="{{ user.country }}" required/></br />
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
            </div>
            </div>
        </div>



    <!--  #########  edit password ########## -->
        <div class="modal fade" id="editPassword" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Change Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_password_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <label>Password</label>
                        <input type="password" name="password" class="form-control edited_value" placeholder="New Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required/></br />
                        <small>Format: Must contain upperCase, lowerCase, Number and at least 8 characters </small><br>
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
            </div>
            </div>
        </div>




    <!--  #########  edit phone ########## -->
        <div class="modal fade" id="editPhone" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Change Phone</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_phone_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <label>Phone</label>
                        <input type="tel" name="phone" class="form-control edited_value" value="{{ user.phone }}" pattern="(01)(0|1|2|5)[0-9]{8}" required> <br />
                        <small>Format: 01nn-nnn-nnnn</small><br>
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
            </div>
            </div>
        </div>



    <!--  #########  edit facbook acount ########## -->
        <div class="modal fade" id="editFb_page" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="staticBackdropLabel">Change facebook account</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'edit_fb_page_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <label>FACEBOOK Page</label>
                        <input type="url" name="fb_page" class="form-control edited_value" value="{{ user.fb_page }}" required/></br />
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="Edit" class="btn btn-primary"> 
                    </form> 
                </div>
              </div>
            </div>
        </div>

 <!--  #########  delete acount ########## -->
        <div class="modal fade" id="deleteAccount" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="staticBackdropLabel">Confirm Delete</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'delete_account_url' %}" method="POST" enctype="multipart/form-data"> 
                        {% csrf_token %} 
                        <input type="checkbox" class="form-check-input" id="confirmDelete" style="margin-left: 6px;" required>
                        <label class="form-check-label" for="confirmDelete">your account will be deleted permanently</label><br /><br />
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <input type="submit" value="delete" class="btn btn-primary"> 
                    </form> 
                </div>
              </div>
            </div>
          </div>

{% endblock %}

{% block scripts %}
    <script src="/static/users/js/userProfile.js"></script>
{% endblock %}